# ERD拖拽连接线测试清单

## 🚀 快速测试步骤

### 1. 启动应用
```bash
npm start
```

### 2. 进入ERD页面
- 打开应用
- 导航到"实体关系图"页面

### 3. 基础拖拽测试

#### 测试1: 临时连接线显示 ✓
- [ ] 添加2个表到画布
- [ ] hover字段行，观察端口出现
- [ ] 按住端口拖拽
- [ ] **预期**: 看到蓝色虚线从起点到鼠标位置
- [ ] **样式**: 线宽3px，虚线(5,5)，半透明(0.8)

#### 测试2: 临时线跟随鼠标 ✓
- [ ] 继续拖拽，移动鼠标
- [ ] **预期**: 虚线实时跟随鼠标移动
- [ ] 移动到不同方向测试
- [ ] **预期**: 曲线形状自然流畅

#### 测试3: 所有端口显示 ✓
- [ ] 拖拽过程中观察其他表
- [ ] **预期**: 所有表的所有端口都变为可见
- [ ] 端口显示为蓝色圆形，中间有加号

#### 测试4: 完成连接 ✓
- [ ] 将鼠标拖到目标字段的端口上
- [ ] **预期**: 目标端口高亮(放大+发光)
- [ ] 松开鼠标
- [ ] **预期**: 创建连接线，显示"内连接"蓝色标签
- [ ] **预期**: 临时虚线消失

#### 测试5: 取消连接 ✓
- [ ] 从端口开始拖拽
- [ ] 松开鼠标在空白处
- [ ] **预期**: 取消连接，临时线消失，无连接创建

#### 测试6: ESC键取消 ✓
- [ ] 从端口开始拖拽
- [ ] 按下ESC键
- [ ] **预期**: 取消连接，临时线消失

### 4. 画布变换测试

#### 测试7: 缩放测试 ✓
- [ ] 使用鼠标滚轮放大画布(Ctrl + 滚轮向上)
- [ ] 拖拽端口
- [ ] **预期**: 临时线正确显示，位置准确
- [ ] 缩小画布(Ctrl + 滚轮向下)
- [ ] 再次拖拽
- [ ] **预期**: 临时线仍然正确

#### 测试8: 平移测试 ✓
- [ ] 按住空白处拖动画布(或按住空格键拖动)
- [ ] 平移到不同位置
- [ ] 拖拽端口创建连接
- [ ] **预期**: 临时线位置正确，不偏移

#### 测试9: 组合变换测试 ✓
- [ ] 先缩放，再平移
- [ ] 拖拽端口
- [ ] **预期**: 临时线仍然准确跟随
- [ ] 在拖拽过程中滚动画布
- [ ] **预期**: 临时线继续跟随

### 5. 视觉效果测试

#### 测试10: 临时线样式 ✓
观察临时连接线的样式:
- [ ] 颜色: 蓝色(#2196f3)
- [ ] 线宽: 3px(比正式连接线粗)
- [ ] 样式: 虚线(5px实线, 5px间隔)
- [ ] 透明度: 0.8(半透明)
- [ ] 曲线: 平滑的S型贝塞尔曲线

#### 测试11: 端口显示逻辑 ✓
- [ ] 正常状态: 端口隐藏
- [ ] hover字段行: 该行端口显示
- [ ] 开始拖拽: 所有端口显示
- [ ] 完成/取消拖拽: 端口恢复隐藏

#### 测试12: 光标样式 ✓
- [ ] 拖拽时画布光标变为crosshair(十字)
- [ ] 端口hover时光标为crosshair
- [ ] 拖拽结束后光标恢复default

### 6. 边界情况测试

#### 测试13: 快速拖拽 ✓
- [ ] 快速拖动鼠标
- [ ] **预期**: 临时线仍能跟上

#### 测试14: 跨表拖拽 ✓
- [ ] 从表A拖到表B
- [ ] 从表B拖到表C
- [ ] 从表C拖回表A
- [ ] **预期**: 所有方向都正常

#### 测试15: 自连接尝试 ✓
- [ ] 尝试从表A字段拖到同一表A的另一字段
- [ ] **预期**: 应该允许(或根据验证规则处理)

#### 测试16: 重复连接 ✓
- [ ] 创建A→B的连接
- [ ] 再次尝试创建相同的A→B连接
- [ ] **预期**: 去重或提示

### 7. 性能测试

#### 测试17: 多表场景 ✓
- [ ] 添加10个表到画布
- [ ] 拖拽创建连接
- [ ] **预期**: 无明显卡顿，流畅

#### 测试18: 频繁拖拽 ✓
- [ ] 连续多次拖拽创建/取消
- [ ] **预期**: 响应速度不变慢

## ✅ 通过标准

### 必须通过
- [x] 拖拽时能看到临时连接线
- [x] 临时线跟随鼠标移动
- [x] 拖拽时所有端口可见
- [x] 完成连接后创建正式连接线
- [x] 画布缩放不影响拖拽
- [x] 画布平移不影响拖拽

### 应该通过
- [x] 临时线为虚线样式
- [x] 临时线半透明
- [x] 光标变为十字
- [x] 端口显示逻辑正确

### 可选优化
- [ ] 端口吸附效果
- [ ] 可连接端口高亮
- [ ] 连接预览提示

## 🐛 问题报告模板

如发现问题，请按以下格式记录：

```
### 问题描述
[简述问题]

### 重现步骤
1. 
2. 
3. 

### 预期行为
[应该怎样]

### 实际行为
[实际怎样]

### 环境信息
- 浏览器: 
- 画布缩放: 
- 其他: 

### 截图/视频
[如有]
```

## 📊 测试结果总结

测试日期: __________  
测试人员: __________

| 测试项 | 结果 | 备注 |
|-------|------|------|
| 基础拖拽 | ✅/❌ | |
| 画布变换 | ✅/❌ | |
| 视觉效果 | ✅/❌ | |
| 边界情况 | ✅/❌ | |
| 性能表现 | ✅/❌ | |

**总体评价**: __________

**建议**: __________
