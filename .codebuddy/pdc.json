{"title":"工作流编辑器-发布状态与主界面可选并驱动AI生成SQL","features":["工作流项增加发布状态（未发布/已发布）","右侧列表支持发布/取消发布切换","主界面模型下拉合并已发布工作流","选择工作流时调用 /api/workflow/execute 产出 SQL","选择模型时保持原有生成逻辑","设置页顶部AppBar固定不随滚动","预览窗口跨页面返回保持并保留会话","修复：主界面模型下拉显示新建模型（读取 ai_models_v2）","未登录强制显示登录页；登录成功后进入主界面并在顶部显示用户名；登录校验严格对照数据库用户","工作流编辑器返回主界面再进入时自动恢复上次打开的工作流画布","主页候选SQL支持 ```sql 代码块高亮渲染","修复：候选SQL与已保存查询分割线拖拽跟随鼠标，消除向下跳动","修复：主界面右侧AI输出框支持垂直滚动","修复：普通模型返回 ```SQL/```Postgres 等围栏也高亮","新增：对话开关打开时自动弹出侧边对话抽屉，沿用模型/工作流","新增：对话气泡下方提供复制与插入按钮，插入遵循选区优先","修复：聊天界面发送时未定义动画变量 dots","修复：聊天气泡支持 Markdown 渲染与代码高亮","修复：登录页刷新时 Markdown 组件 children 为对象导致 React 渲染错误","修复：预览对话401鉴权问题","修复：安装 github-markdown-css 解决样式导入解析错误","新增：预览聊天框与对话抽屉提供“清除聊天内容”按钮","增强：AI生成SQL输出与聊天信息统一使用 Markdown + 代码高亮（SQL/代码块）"],"tech":{"Web":{"arch":"react","component":null}},"design":"右侧AI生成区域的对话抽屉与预览对话统一采用 ReactMarkdown + rehype-highlight 渲染，支持 ```sql、```postgres 等围栏统一高亮；顶部工具区新增“清除”按钮以便一键清空当前会话并同步 localStorage。主界面非对话模式的AI输出也使用 Markdown 高亮渲染代码块。","plan":{"在画布上实现Handle悬停右键唤起":"done","构建四项菜单并交互":"done","创建节点智能放置":"done","自动连线至新节点":"done","完善边界与状态处理":"done","实现Debug聊天式对话框":"done","新增预览功能：按钮触发聊天式对话":"done","用户反馈与快捷键说明":"done","设置中开关跟随光标菜单":"holding","拆分设置为提供商与模型并更新节点UI":"done","同名覆盖与复制命名防重":"done","主界面已保存查询重命名与复制":"done","统一主界面与ERD顶部样式":"done","发布状态与选择器联动AI生成":"done","设置页顶部AppBar固定":"done","预览窗口跨页面返回保持":"done","修复主界面模型下拉未显示新增模型":"done","实现登录页与路由守卫（未登录跳登录页）":"done","服务端登录校验数据库并签发JWT":"done","主界面显示已登录用户名":"done","返回主界面再进入工作流时保持画布":"done","主页候选SQL高亮渲染":"done","主界面右侧AI输出支持滚动":"done","修复：普通模型代码围栏标签大小写和别名识别":"done","新增：对话开关自动打开侧边对话抽屉":"done","新增：对话气泡复制与插入按钮":"done","修复：聊天界面发送时未定义动画变量 dots":"done","修复：聊天气泡支持 Markdown 渲染与代码高亮":"done","修复：登录页刷新时 Markdown 组件 children 为对象导致 React 渲染错误":"done","修复：预览对话401鉴权问题":"done","新增：预览对话与主界面对话抽屉新增清除按钮":"done","增强：AI输出与聊天统一 Markdown + 代码高亮":"done"},"coreFiles":["d:\\CodeBuddy\\SPDSQL\\client\\src\\pages\\Settings.tsx","d:\\CodeBuddy\\SPDSQL\\client\\src\\components\\Workflow\\PreviewModal.tsx","d:\\CodeBuddy\\SPDSQL\\client\\src\\pages\\WorkflowEditor\\index.tsx","d:\\CodeBuddy\\SPDSQL\\client\\src\\pages\\App.tsx"]}